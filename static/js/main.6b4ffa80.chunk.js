(this["webpackJsonpgmk-price-tracker"]=this["webpackJsonpgmk-price-tracker"]||[]).push([[0],{155:function(e,t,c){},238:function(e,t,c){},239:function(e,t,c){var a={"./8008.jpeg":240,"./9009.jpeg":241,"./cafe.jpg":242,"./camping.jpeg":243,"./laser.png":244,"./mizu.png":245,"./oblivion.png":246,"./olivia.png":247,"./wob.jpg":248};function n(e){var t=r(e);return c(t)}function r(e){if(!c.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=r,e.exports=n,n.id=239},240:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/8008.c8e1e650.jpeg"},241:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/9009.e9d053b1.jpeg"},242:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/cafe.bdac71c0.jpg"},243:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/camping.9b098e2a.jpeg"},244:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/laser.aff55880.png"},245:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/mizu.eb4bc4b3.png"},246:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/oblivion.04bfe77a.png"},247:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/olivia.87bda4e2.png"},248:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/wob.6618efec.jpg"},392:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),r=c(76),s=c.n(r),i=(c(238),c(30)),o=c(31),l=c(42),d=c(43),j=c(62),h=c(25),u=(c(155),c(17));var b=function(e){var t={};return e.keys().forEach((function(c){t[c.replace("./","").replace(/\.[^/.]+$/,"")]=e(c)})),t}(c(239)),p=c(148);p.a.initializeApp({apiKey:"AIzaSyAcBmvPhJ0uJjEyeTZRiGC_fsTF8GDCRSA",authDomain:"mm-tracker-760cf.firebaseapp.com",projectId:"mm-tracker-760cf",storageBucket:"mm-tracker-760cf.appspot.com",messagingSenderId:"692582051190",appId:"1:692582051190:web:0d71918a4278a62657de57"});var f=p.a.firestore();f.enablePersistence().catch((function(e){console.error(e)}));var O=f,g=c(4);var m=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),c=t[0],n=t[1];return Object(a.useEffect)((function(){var e=[];O.collection("gmk").orderBy("count").limitToLast(8).get().then((function(t){t.forEach((function(t){e.push(t.id)})),n(e.reverse())}))}),[]),Object(g.jsxs)("div",{className:"home-page",children:[Object(g.jsx)("div",{className:"graph",style:{padding:10},children:Object(g.jsx)("p",{className:"section-header",style:{margin:0},children:"Popular Sets"})}),Object(g.jsx)("div",{className:"top-images",children:c.map((function(e){var t=e.split(" ")[1];return Object(g.jsx)(j.b,{to:"/products/"+t+"/",children:Object(g.jsx)("div",{className:"square",children:Object(g.jsx)("div",{className:"content",children:Object(g.jsx)("div",{className:"table",children:Object(g.jsxs)("div",{className:"table-cell",children:[Object(g.jsx)("img",{className:"rs",src:b[t].default,alt:e}),Object(g.jsxs)("p",{className:"home-gmk",children:[" GMK ",t.charAt(0).toUpperCase()+t.slice(1)," "]})]})})})})},e)}))}),Object(g.jsx)("div",{className:"info",children:Object(g.jsxs)("dl",{children:[Object(g.jsx)("dt",{className:"section-header",children:"Website Information & FAQ"}),Object(g.jsxs)("dd",{children:["This project was created by Aaryan Agrawal and Daniel Li, with help from Wesley Liu. The source code is available at ",Object(g.jsx)("a",{href:"https://github.com/13Ducks/GMKPriceTracker",style:{whiteSpace:"nowrap"},children:"https://github.com/13Ducks/GMKPriceTracker"}),"."]}),Object(g.jsx)("dt",{children:"How was the data collected?"}),Object(g.jsxs)("dd",{children:["All posts that seemed to be selling GMK keycaps on ",Object(g.jsx)("a",{href:"https://www.reddit.com/r/mechmarket/",children:"r/mechmarket"})," were scraped and parsed to try to identify the product and the price it was sold at."]}),Object(g.jsx)("dt",{children:"Why are some of the prices/products incorrect?"}),Object(g.jsx)("dd",{children:"Parsing real text is hard. Many situations are impossible to parse algorithmically leading to incorrect data, but we have tried to minimize errors through post-parsing statistics and other measures."}),Object(g.jsx)("dt",{children:"Why are the set names only one word?"}),Object(g.jsx)("dd",{children:"Due to the nature of our parsing algorithm, the only way we could get GMK set names without a premade list is by using the first word of a set name."}),Object(g.jsx)("dt",{children:"What technology does this project use?"}),Object(g.jsx)("dd",{children:Object(g.jsxs)("ul",{children:[Object(g.jsxs)("li",{children:["Scraping: ",Object(g.jsx)("a",{href:"https://pypi.org/project/psaw/",children:"PSAW"})]}),Object(g.jsxs)("li",{children:["Parsing: ",Object(g.jsx)("a",{href:"https://www.python.org/",children:"Python"}),", ",Object(g.jsx)("a",{href:"https://pypi.org/project/pandas/",children:"Pandas"})]}),Object(g.jsxs)("li",{children:["Database: ",Object(g.jsx)("a",{href:"https://firebase.google.com/",children:"Firebase"})]}),Object(g.jsxs)("li",{children:["Website: ",Object(g.jsx)("a",{href:"https://reactjs.org/",children:"React"}),", ",Object(g.jsx)("a",{href:"https://recharts.org/",children:"Recharts"}),", ",Object(g.jsx)("a",{href:"https://reactrouter.com/",children:"React Router"}),", ",Object(g.jsx)("a",{href:"https://ant.design/",children:"Ant Design"}),", ",Object(g.jsx)("a",{href:"https://fusejs.io/",children:"Fuse.js"})]})]})}),Object(g.jsx)("dt",{children:"What GMK sets do you own?"}),Object(g.jsx)("dd",{children:"At the moment, Cafe, Darling, and Peaches n Cream."})]})})]})},x=c(44),v=c(396),y=c(400),k=c(205),w=c(206),D=c(103),S=c(100),M=c(226),N=c(199),K=c(225),C=c.p+"static/media/thinking.955ba4dc.png",F=["base","bundle","single","other"],A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],P=[2020,1],E=[2021,4],G=new Date(P[0],P[1]-1,1,0,0,0,0),I=new Date(E[0],E[1]-1,1,0,0,0,0);function T(e,t,c){return c?e.sort((function(e,c){return e[t]<c[t]?-1:e[t]>c[t]?1:0})):e.sort((function(e,c){return c[t]<e[t]?-1:c[t]>e[t]?1:0}))}function L(e){var t=new Date(e);return A[t.getMonth()]+" "+t.getFullYear()}function z(e){var t=Object(a.useState)(["not mounted"]),c=Object(u.a)(t,2),n=c[0],r=c[1];Object(a.useEffect)((function(){var t=[];O.collection("gmk").get().then((function(c){c.forEach((function(e){t.push(e.id)}));var a=new K.a(t,{includeScore:!0,threshold:.3}).search(e.data.productID),n=[];a.forEach((function(e){var t=e.item.split(" ")[1];t&&n.push(t)})),r(n.slice(0,10))}))}),[e.data.productID]);var s=e.data.productID,i=[];return 0===n.length?i.push(Object(g.jsx)("p",{style:{fontSize:20},children:"No similarly named sets were found."},"none")):"not mounted"!==n[0]&&(i.push(Object(g.jsx)("p",{style:{fontSize:20},children:"Did you mean one of the following?"},"meant")),n.forEach((function(e){i.push(Object(g.jsx)(j.b,{to:"/products/"+e+"/",children:Object(g.jsxs)("p",{style:{fontSize:20,margin:0},children:["GMK ",e.charAt(0).toUpperCase()+e.slice(1)]})},e))}))),Object(g.jsxs)("div",{className:"graph",style:{padding:20},children:[Object(g.jsx)("img",{src:C,alt:"thinking emote",style:{padding:20}}),Object(g.jsxs)("p",{style:{margin:0,fontSize:20},children:["No data was found for for ",Object(g.jsxs)("span",{style:{fontWeight:"bold"},children:[" GMK ",s.charAt(0).toUpperCase()+s.slice(1)]})]}),i]})}function W(){var e=Object(h.h)().productID;"gmk"===(e=e.toLowerCase()).split(" ")[0]&&(e=e.split(" ")[1]),e.split(" ").length>1&&(e=e.split(" ")[0]);var t=function(){var e=Object(a.useRef)(!0);return Object(a.useEffect)((function(){e.current=!1}),[]),e.current}(),c="gmk "+e,r=Object(a.useState)([]),s=Object(u.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)([]),d=Object(u.a)(l,2),j=d[0],b=d[1],p=Object(a.useState)({start:G,end:I}),f=Object(u.a)(p,2),m=f[0],K=f[1],C=Object(a.useState)([].concat(F)),A=Object(u.a)(C,2),W=A[0],B=A[1],R=Object(a.useState)(["date",!0]),U=Object(u.a)(R,2),J=U[0],_=U[1],q=Object(a.useState)(""),Y=Object(u.a)(q,2),$=Y[0],H=Y[1],Q=Object(a.useState)(""),V=Object(u.a)(Q,2),Z=V[0],X=V[1],ee=Object(a.useState)(G),te=Object(u.a)(ee,2),ce=te[0],ae=te[1],ne=Object(a.useState)(I),re=Object(u.a)(ne,2),se=re[0],ie=re[1];function oe(e){return Object(g.jsx)("th",{onClick:function(){J[0]===e?(o(T(i.slice(),e,!J[1])),_([e,!J[1]])):(_([e,!0]),o(T(i.slice(),e,!0)))},children:e+"  "+(J[0]===e?J[1]?"\u25b2":"\u25bc":"\u21d5")})}return Object(a.useEffect)((function(){O.collection("gmk").doc(c).collection("sales").orderBy("date").get().then((function(e){for(var t={},c=P[0];c<=E[0];c++)for(var a=1;a<=12;a++)c===P[0]&&a<P[1]||c===E[0]&&a>E[1]||(t[[c,a]]={base:[0,0],bundle:[0,0],single:[0,0],other:[0,0]});var n=[];e.forEach((function(e){var c=e.data(),a=c.date.toDate(),r=[a.getFullYear(),a.getMonth()+1];n.push({id:e.id,category:c.category,price:c.price,linkFull:c.link,link:c.link.split("/").slice(-2),date:a,sets:c.sets.join(", ")}),t[r][c.category][0]+=c.price,t[r][c.category][1]++}));var r=[];for(var s in t){var i=s.split(","),l=Object(u.a)(i,2),d=l[0],j=l[1],h={epoch:new Date(d,j-1,1,0,0,0,0).getTime()},p=t[s];for(var f in p){var O=p[f],g=O[0]/O[1];isNaN(g)||(h[f]=Math.round(g),h[f+"_q"]=O[1])}r.push(h)}o(n),b(r)}))}),[c]),t?null:0===i.length?Object(g.jsx)(z,{data:{productID:e}}):Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:"graph",children:[Object(g.jsxs)("p",{style:{padding:20,margin:0,fontSize:20},children:["Showing results for ",Object(g.jsxs)("span",{style:{fontWeight:"bold"},children:[" GMK ",e.charAt(0).toUpperCase()+e.slice(1)]})]}),Object(g.jsxs)(v.a,{width:800,height:400,data:j,onClick:function(e,t){null!==e&&"recharts-dot"!==t.target.className.baseVal&&B([].concat(F))},onMouseDown:function(e){null!==e&&H(e.activeLabel)},onMouseMove:function(e){null!==e&&$&&X(e.activeLabel)},onMouseUp:function(){return function(){var e=$,t=Z;if(e!==t&&""!==t){if(e>t){var c=[t,e];e=c[0],t=c[1]}var a=new Date(t);a.setMonth(a.getMonth()+1),ae(e),ie(t),H(""),X(""),K({start:e,end:a})}else if(H(""),X(""),""!==e){var n=new Date(e);n.setMonth(n.getMonth()+1),K({start:e,end:n})}}()},children:[Object(g.jsx)(y.a,{strokeDasharray:"3 3"}),Object(g.jsx)(k.a,{dataKey:"epoch",type:"number",scale:"time",padding:{left:25,right:25},interval:0,angle:30,tickMargin:15,height:50,domain:[ce,se],allowDataOverflow:!0,tickFormatter:L}),Object(g.jsx)(w.a,{label:{value:"Price (USD)",angle:-90,position:"insideLeft"}}),Object(g.jsx)(D.a,{labelFormatter:L,formatter:function(e,t,c){return"$".concat(c.payload[c.dataKey],", ").concat(c.payload[c.dataKey+"_q"]," units")}}),Object(g.jsx)(S.a,{}),Object(g.jsx)(M.a,{type:"linear",dataKey:"base",stroke:"#4053d3",activeDot:{onClick:function(e,t){return B([t.dataKey])}}}),Object(g.jsx)(M.a,{type:"linear",dataKey:"bundle",stroke:"#b51d14",activeDot:{onClick:function(e,t){return B([t.dataKey])}}}),Object(g.jsx)(M.a,{type:"linear",dataKey:"single",stroke:"#00b25d",activeDot:{onClick:function(e,t){return B([t.dataKey])}}}),Object(g.jsx)(M.a,{type:"linear",dataKey:"other",stroke:"#00beff",activeDot:{onClick:function(e,t){return B([t.dataKey])}}}),$&&Z?Object(g.jsx)(N.a,{x1:$,x2:Z,strokeOpacity:.3}):null]})]}),Object(g.jsx)("button",{className:"resetSetButton",onClick:function(){K({start:G,end:I}),B([].concat(F)),ae(G),ie(I)},children:"Reset"}),F.map((function(e){return t=e,Object(g.jsxs)(n.a.Fragment,{children:[Object(g.jsx)("label",{className:"includeSetBox",htmlFor:"chk".concat(t),children:t}),Object(g.jsx)("input",{id:"chk".concat(t.name),type:"checkbox",checked:W.includes(t),onChange:function(e){e.currentTarget.checked?B([].concat(Object(x.a)(W),[t])):B(W.filter((function(e){return e!==t})))},style:{marginLeft:"3px"}})]},t);var t})),Object(g.jsxs)("table",{children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[oe("category"),oe("price"),oe("link"),oe("date"),oe("sets")]})}),Object(g.jsx)("tbody",{children:i.map((function(e){return e.date>=m.start&&e.date<=m.end&&W.includes(e.category)?Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:e.category}),Object(g.jsx)("td",{children:e.price}),Object(g.jsx)("td",{children:Object(g.jsx)("a",{href:"https://www.reddit.com"+e.linkFull,target:"_blank",rel:"noopener noreferrer",children:e.link})}),Object(g.jsx)("td",{children:e.date.toString()}),Object(g.jsx)("td",{children:e.sets})]},e.id):null}))})]})]})}var B=function(){var e=Object(h.i)(),t=e.path;return e.url,Object(g.jsx)("div",{children:Object(g.jsxs)(h.d,{children:[Object(g.jsx)(h.b,{exact:!0,path:t,children:Object(g.jsx)(h.a,{to:"/"})}),Object(g.jsx)(h.b,{path:"".concat(t,"/:productID"),children:Object(g.jsx)(W,{})})]})})},R=(c(391),c(401).a.Search);function U(){var e=Object(h.g)();return Object(g.jsx)(R,{placeholder:"Search GMK prices",onSearch:function(t){e.push("/products/".concat(t))},style:{width:250}})}var J=function(){return Object(g.jsxs)("div",{className:"nav-bar",children:[Object(g.jsx)(j.b,{to:"/",className:"home-button",children:"GMK Price Tracker"}),Object(g.jsx)(U,{})]})},_=function(e){Object(l.a)(c,e);var t=Object(d.a)(c);function c(){var e;return Object(i.a)(this,c),(e=t.call(this)).state={},e}return Object(o.a)(c,[{key:"render",value:function(){return Object(g.jsx)(j.a,{children:Object(g.jsxs)(h.d,{children:[Object(g.jsxs)(h.b,{path:"/products",children:[Object(g.jsx)(J,{}),Object(g.jsx)(B,{})]}),Object(g.jsxs)(h.b,{path:"/",children:[Object(g.jsx)(J,{}),Object(g.jsx)(m,{})]})]})})}}]),c}(a.Component),q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,403)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),a(e),n(e),r(e),s(e)}))};s.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(_,{})}),document.getElementById("root")),q()}},[[392,1,2]]]);
//# sourceMappingURL=main.6b4ffa80.chunk.js.map